!function(e,t){"use strict";function n(e){e.widget("news",{title:"News",description:"Displays a RSS/Atom feed",category:"News",templateUrl:"{widgetsPath}/news/src/news.view.html",controller:"NewsController",controllerAs:"vm",config:{num:5,showTitle:!0,showDescription:!0},resolve:{feed:o},edit:{templateUrl:"{widgetsPath}/news/src/news.edit.html"}})}function o(e,t){if(t.url)return e.loadFeed(t)}function r(e,t){var n=this;n.feed=e}function l(e,t,n){function o(e){return e.num||(e.num=5),n+encodeURIComponent(e.url)+"&num="+e.num}function r(n){var r=e.defer();return t.jsonp(o(n)).success(function(e){e&&e.responseData&&e.responseData.feed?r.resolve(e.responseData.feed):r.reject("feed does not contain responseData element")}).error(function(e){r.reject(e)}),r.promise}var l={loadFeed:r};return l}function i(){return function(e){return new Date(e)}}angular.module("adf.widget.news",["adf.provider"]).value("newsServiceUrl","https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=JSON_CALLBACK&q="),angular.module("adf.widget.news").run(["$templateCache",function(e){e.put("{widgetsPath}/news/src/news.edit.html",'<form role=form><div class=form-group><label for=url>Feed url</label> <input type=url class=form-control id=url ng-model=config.url placeholder="Enter feed url"></div><div class=form-group><label for=num>Number of Entries</label> <input type=number class=form-control id=num ng-model=config.num></div><div class=form-group><label for=showTitle>Show Feed Title</label> <input type=checkbox class=form-control id=showTitle ng-model=config.showTitle></div><div class=form-group><label for=showTitle>Show Feed Description</label> <input type=checkbox class=form-control id=showDescription ng-model=config.showDescription></div></form>'),e.put("{widgetsPath}/news/src/news.view.html",'<div class=news><div class="alert alert-info" ng-if=!vm.feed>Please insert a feed url in the widget configuration</div><div ng-if=vm.feed><h3 ng-if=config.showTitle><a ng-href={{vm.feed.link}} target=_blank>{{vm.feed.title}}</a></h3><p ng-if=config.showDescription>{{vm.feed.description}}</p><div class=media ng-repeat="entry in vm.feed.entries"><div class=media-body><h4 class=media-heading><a ng-href={{entry.link}} target=_blank>{{entry.title}}</a></h4><p>{{entry.contentSnippet}}</p><small>{{entry.author}}, {{entry.publishedDate | toDate | date: \'yyyy-MM-dd HH:mm\'}}</small></div></div></div></div>')}]),angular.module("adf.widget.news").config(n),n.$inject=["dashboardProvider"],o.$inject=["NewsService","config"],angular.module("adfWidgetSample",["adf","adf.widget.news","LocalStorageModule"]),angular.module("adfWidgetSample").controller("dashboardController",["$scope","localStorageService",function(e,t){var n=t.get("widgetSampleDashboard");n||(n={rows:[{columns:[{styleClass:"col-md-4",widgets:[]},{styleClass:"col-md-8",widgets:[{type:"news",title:"News",config:{}}]}]}]}),e.dashboard={model:n},e.$on("adfDashboardChanged",function(e,n,o){t.set(n,o)})}]),angular.module("adfWidgetSample").config(["dashboardProvider","localStorageServiceProvider",function(e,t){t.setPrefix("adf.news"),e.structure("4-8",{rows:[{columns:[{styleClass:"col-md-4",widgets:[]},{styleClass:"col-md-8",widgets:[]}]}]})}]),angular.module("adf.widget.news").controller("NewsController",r),r.$inject=["feed","config"],angular.module("adf.widget.news").factory("NewsService",l),l.$inject=["$q","$http","newsServiceUrl"],angular.module("adf.widget.news").filter("toDate",i)}(window);